---
layout: post
title: "本地搭建hustoj"
date: 2015-03-30
tags: oj
description: 搭建hustoj的一些问题
---
<p>学长让我搭建一个oj，因为我们学校采用的是hustoj，所以就搭建他来熟悉对oj的管理;</p>
<ul>
	<li>注：本次操作系统为ubuntu14.04;</li>
	<li>下载源码：</li>
</ul>
<pre class="">sudo apt-get update;sudo apt-get install subversion\nsvn checkout http://hustoj.googlecode.com/svn/trunk/install hustoj\n</pre>
<ul>
	<li>打开hustoj文件夹;</li>
	<li>编辑install.sh和web/include/db_info.inc.php设定数据库;</li>
	<li>
		打开
		<a href="http://localhost/JudgeOnline/">http://localhost/JudgeOnline/</a>
		测试;
		<br></li>
	<li>注册帐号;</li>
	<li>设定帐号管理员权限：</li>
</ul>
<pre class="">insert into privilege(user_id,rightstr) values(你的帐号,administrator);</pre>
<ul>
	<li>配置判题机：/home/judge/etc/judge.conf</li>
</ul>
<pre class=""><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OJ_HOST_NAME</span><span class="pun" style="color: rgb(102, 102, 0);">=</span><span class="pln">localhost &nbsp; &nbsp;</span><span class="com" style="color: rgb(136, 0, 0);">#数据库地址</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; OJ_USER_NAME</span><span class="pun" style="color: rgb(102, 102, 0);">=</span><span class="pln">jol </span><span class="com" style="color: rgb(136, 0, 0);">#数据库用户名</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; OJ_PASSWORD</span><span class="pun" style="color: rgb(102, 102, 0);">=</span><span class="com" style="color: rgb(136, 0, 0);"># 数据库密码</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; OJ_DB_NAME</span><span class="pun" style="color: rgb(102, 102, 0);">=</span><span class="pln">jol </span><span class="com" style="color: rgb(136, 0, 0);">#数据库名</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; OJ_PORT_NUMBER</span><span class="pun" style="color: rgb(102, 102, 0);">=</span><span class="lit" style="color: rgb(0, 102, 102);">3306</span><span class="pln"></span><span class="com" style="color: rgb(136, 0, 0);">#数据库端口</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; OJ_RUNNING</span><span class="pun" style="color: rgb(102, 102, 0);">=</span><span class="lit" style="color: rgb(0, 102, 102);">1</span><span class="pln"></span><span class="com" style="color: rgb(136, 0, 0);">#可以同时运行几个进程</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; OJ_SLEEP_TIME</span><span class="pun" style="color: rgb(102, 102, 0);">=</span><span class="lit" style="color: rgb(0, 102, 102);">1</span><span class="pln"></span><span class="com" style="color: rgb(136, 0, 0);">#如果有空闲 要休眠多久</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; OJ_TOTAL</span><span class="pun" style="color: rgb(102, 102, 0);">=</span><span class="lit" style="color: rgb(0, 102, 102);">1</span><span class="pln"></span><span class="com" style="color: rgb(136, 0, 0);">#总共有多少台机器负责判题</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; OJ_MOD</span><span class="pun" style="color: rgb(102, 102, 0);">=</span><span class="lit" style="color: rgb(0, 102, 102);">0</span><span class="pln"></span><span class="com" style="color: rgb(136, 0, 0);">#当前机器评判取模为多少的提交</span></pre>
<ul>
	<li>重启judge服务：</li>
</ul>
<pre class="">sudo pkill-9 judged\nsudo judged\n</pre>
<p>ok！</p>